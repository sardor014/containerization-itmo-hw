## Описание docker-compose

### 1. Сервисы 

#### **`db`**
* **Образ:** Фикс версия `postgres:14`.
* **Конфигурация:** Переменные берутся из файла `.env`.
* **Данные:** Примонтировали `/var/lib/postgresql/data` к `./pg_data`.
* **Порты:** Порт `5432` открыт наружу
* **Healthcheck** Каждые 10 сек проверяем, готова ли база принимать подключения (через `pg_isready`).

#### **`init_checker`**
* **Образ:** Легкий `alpine`.
* **Зависимость:** Чекер ждет, пока сервис `db` станет полностью здоровым (через `service_healthy`).
* **Финал:** Как только база готова, он выводит сообщение "PostgreSQL is up and running!" (через `command`) и завершает работу.

#### **`jupyter`**
* **Образ:** Образ из докерфайла с ЛР1. Присвоили ему имя `my_jupyter_image`.
* **Порты:** Стучимся в `8080`, а Docker перенаправляет это на `8000` внутри контейнера.
* **Данные:** Сохраняем все в `./jupyter_data`.
* **Healthcheck:** Так же, как и чекер, он ждет полной готовности базы данных.


### 2. Сети

* Все три сервиса подключены к `app_network`, поэтому они видят друг друга по именам.


## Ответы на вопросы

### 1. Можно ли ограничивать ресурсы (например, память или CPU) для сервисов в docker-compose.yml? Если нет, то почему, если да, то как?

Да, можно через конструкцию 

```
deploy:
    resources:
    limits:
        cpus: '0.5'
        memory: 512M
```

При привышении лимитов -> рестарт


### 2. Как можно запустить только определенный сервис из docker-compose.yml, не запуская остальные?

Да, можно при запуске явным образом покинуть название нужного сервиса

```
docker-compose up <имя_сервиса>
```

Но если внутри сервиса лежит зависимость через depends_on, то вместе с ним запустится и другой сервис. Чтобы такого не было, можно прокинуть доп флаг

```
docker-compose up --no-deps <имя_сервиса>
```
